<!--pages/index/index.wxml-->
<view class="container">
  <view class="title">拍下食品包装，立刻分析</view>
  <view class="subtitle">让您轻松看懂营养成分</view>
  
  <!-- 上传按钮 -->
  <button class="upload-btn" type="primary" bindtap="chooseAndAnalyzeImage">开始拍照或选择图片</button>

  <!-- 加载提示 -->
  <view wx:if="{{loading}}" class="loading-container">
    <text>正在为您分析，请稍候...</text>
  </view>

  <!-- 分析结果展示区域 -->
  <view wx:if="{{result}}" class="result-container">
    <view class="result-summary {{result.summary_rating}}">{{result.summary}}</view>

    <view class="result-grid">
      <!-- 使用 wx:for 循环展示每一项营养素 -->
      <block wx:for="{{result.nutrients}}" wx:key="name">
        <view class="result-item {{item.rating}}">
          <view class="item-friendly-name">{{item.friendly_name}} ({{item.name}})</view>
          <view class="item-value">{{item.value}} {{item.unit}}</v>
          <view class="item-advice">{{item.advice}}</view>
        </view>
      </block>
    </view>
  </view>

  <!-- 错误信息展示区域 -->
  <view wx:if="{{error}}" class="error-container">
    <view class="error-text">{{error}}</view>
  </view>

</view>